<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.1.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.2/socket.io.min.js"></script>
    <script src="{{ url_for('static', filename='js/header.js') }}"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/login.css') }}">
    <link rel="icon" type="image/x-icon" href="/static/favicon/favicon_.ico">
    <title>Fragile</title>
</head>
<style>
.input-container {
    position: relative;
    margin-top: 25px;
    margin-bottom: 12px;
    width: 300px;
}

input[type="text"] {
    color: black;
    width: 100%;
    padding: 10px 10px 10px 5px;
    display: block;
    border: none;
    border: 2px solid #9e9e9e;
    background: transparent;
    outline: none;
    font-size: 16px;
    margin: 5px;
    border-radius: 5px;
}

input[type="text"]:focus {
    border: 2px solid #000000;
    border-radius: 5px;
}

label {
    position: absolute;
    top: 12px;
    left: 15px;
    font-size: 16px;
    color: #323232;
    transition: 0.2s ease all;
    pointer-events: none;
}

input[type="text"]:focus ~ label,
input[type="text"]:valid ~ label {
    top: -20px;
    font-size: 14px;
    color: #000000;
}
.card {
    border: 2px solid black;
    border-radius: 5px;
    padding: 25px 15px;
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: start;
}
.card div i:nth-child(2) {
    display: flex;
    justify-content: end;
    align-items: end;
    text-wrap: nowrap;
    width: 50%;
}
.card div {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
} 
.card div i:nth-child(1) {
    font-weight: 200;
    font-style: normal;
    display: flex;
    justify-content: start;
    align-items: start;
    width: 100%;
    text-wrap: nowrap;
}
.card i {
    font-weight: 200;
    font-style: normal;
    display: flex;
    justify-content: start;
    align-items: start;
    width: 100%;
    text-wrap: nowrap;
}
.card a {
    width: 80%;
}
.divo {
  display: flex;
  padding: 1px 5px;
  text-decoration: none;
  font-family: 'Poppins', sans-serif;
  font-size: 10px;
  color: #000000;
  background: #00000035;
  border-radius: 50px;
  margin: auto;
  transition: 1s;
  margin-top: 18px;
}
.div {
  display: flex;
  padding: 1px 105;
  text-decoration: none;
  font-family: 'Poppins', sans-serif;
  font-size: 10px;
  color: #000000;
  background: #00000035;
  border-radius: 50px;
  margin: auto;
  transition: 1s;
  margin-top: 18px;
}

</style>
<!--img src="{{ url_for('static', filename='img/noise.png') }}" style="width: 100vw; height: 100vh; position: absolute;" alt=""-->
<body id="bod">
    <div class="ticker-container">
        <div class="ticker-content" style="width: 10000px;" id="ticker">
          <span style="color: transparent;">this is a horizontal texthorizontal texthorizontal text</span>
          <span style="color: transparent;">this is a horizontal texthorizontal texthorizontal text</span>
          <span style="color: transparent;">this is a horizontal texthorizontal texthorizontal text</span>
          <span style="color: transparent;">this is a horizontal texthorizontal texthorizontal text</span>
          <span style="color: transparent;">this is a horizontal texthorizontal texthorizontal text</span>
          <span style="color: transparent;">this is a horizontal texthorizontal texthorizontal text</span>
          <span style="color: transparent;">this is a horizontal texthorizontal texthorizontal text</span>
          <span style="color: transparent;">this is a horizontal texthorizontal texthorizontal text</span>
          <span style="color: transparent;">this is a horizontal texthorizontal texthorizontal text</span>
          <span style="color: transparent;">this is a horizontal texthorizontal texthorizontal text</span>
          <span style="color: transparent;">this is a horizontal texthorizontal texthorizontal text</span>
          <span style="color: transparent;">this is a horizontal texthorizontal texthorizontal text</span>
          <span style="color: transparent;">this is a horizontal texthorizontal texthorizontal text</span>
          <span style="color: transparent;">this is a horizontal texthorizontal texthorizontal text</span>
          <span style="color: transparent;">this is a horizontal texthorizontal texthorizontal text</span>
          <span style="color: transparent;">this is a horizontal texthorizontal texthorizontal text</span>
          <span style="color: transparent;">this is a horizontal texthorizontal texthorizontal text</span>
        </div>
      </div>
    <div style="width: 100vw; left: 0; top: 0; position: absolute; background-color: #0000; height: 50px;">
    </div>
    <div id="correct_" class="man contain_menu center" style="position: fixed; top: 0; left: 0; z-index: 1000; display: none; background-color: #ffffff;">
        <div id="correct" class="center" align="center" style="transition: .3s; position: absolute; height: 400px; width:auto; height: auto; border-radius: 15px; background-color: rgb(255, 255, 255); border: 1px solid rgb(177, 177, 177); z-index: 50; padding: 55px 25px;">
            <br><br>
            <div class="col">
                <h1 style="font-size: 25px; color: rgb(0, 0, 0); margin-bottom: 25px; margin: 25px;"><i style="font-size: 16px; font-weight: 200;">Success!<br>Your Orders are being processed. <br> In the mean time You Might recieve a confirmation call.</i></h1><br>
                <div class="row" style="margin: 0; margin-top: 25px; width: 40%; padding: 0;">
                    <a href="/home" style="margin: auto; padding: 5px 25px; font-size: 19px; text-wrap: nowrap; background: black; color: #ffffff;">Take me Home</a>
                </div>
            </div>
        </div>
        <div style="width: 100vw; height: 100vh; background-color: rgb(250, 250, 250);"></div>
    </div>
    <div id="notcorrect_" class="man contain_menu center" style="position: fixed; top: 0; left: 0; z-index: 1000; display: none; background-color: #ffffff;">
        <div id="notcorrect" class="center" align="center" style="transition: .3s; position: absolute; height: 400px; width:auto; height: auto; border-radius: 15px; background-color: rgb(255, 255, 255); border: 1px solid rgb(177, 177, 177); z-index: 50; padding: 55px 25px;">
            <br><br>
            <div class="col">
                <h1 style="font-size: 25px; color: rgb(0, 0, 0); margin-bottom: 25px; margin: 25px;"><i style="font-size: 16px; font-weight: 200;">An Error ocurred! :/ <br>Please Try again.</i></h1><br>
                <div class="row" style="margin: 0; margin-top: 25px; width: 40%; padding: 0;">
                    <a onclick="op('notcorrect', 'notcorrect_')" style="margin: auto; padding: 5px 25px; font-size: 19px; text-wrap: nowrap; background: black; color: #ffffff;">Try Again</a>
                </div>
            </div>
        </div>
        <div onclick="op('notcorrect', 'notcorrect_')" style="width: 100vw; height: 100vh; background-color: rgb(250, 250, 250);"></div>
    </div>

    <!--div class="man v pizzaria n"></div-->
    <div id="menu_" class="man contain_menu" style="position: fixed; top: 0; left: 0; z-index: 1000; display: none; flex-direction: row; background-color: #0000005d; backdrop-filter: blur(10px);">
        <div id="menu" class="menu">
            <a onclick="op()" style="padding: 10px; position: absolute; top: 0;  right: 0; color: white;filter: brightness(-100%); cursor: pointer; margin-top: -20px; font-size: 55px;"><img style="width: 35px;" src="{{ url_for('static', filename='img/close.png') }}" alt=""></a>
            <br><br>
            <div class="column">
            <h4 onclick="window.location = '/home';" class="b_ fb b">Home</h4>
            </div>
            
            <div class="div center" style="margin: 25px 45px; background-color: #ccc;"></div>
            <div class="column">
            
            <ul id="categories_list">

            </ul>
            </div>
            <!--div class="div center" style="margin: 25px; background-color: #ccc; margin-top: 25px;"></div>
            <div class="column">
                <h4 style="font-weight: 300;" onclick="window.location.href = '/cart'" style="font-weight: 1000;" class="b_ pointer">CART<svg style="width: 15px; margin-left:10px; margin-bottom: -2px; height: auto;" class="svg s" xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%" viewBox="5.7 0 105.5 126.1" preserveAspectRatio="xMinYMax meet" data-hook="svg-icon-1">
                    <path d="M99.8 28.4c0-1.2-0.9-2-2.1-2h-15c0 3.2 0 7.6 0 8.2 0 1.5-1.2 2.6-2.6 2.9 -1.5 0.3-2.9-0.9-3.2-2.3 0-0.3 0-0.3 0-0.6 0-0.9 0-4.7 0-8.2H40.1c0 3.2 0 7.3 0 8.2 0 1.5-1.2 2.9-2.6 2.9 -1.5 0-2.9-0.9-3.2-2.3 0-0.3 0-0.3 0-0.6 0-0.6 0-5 0-8.2h-15c-1.2 0-2 0.9-2 2L8.3 124c0 1.2 0.9 2.1 2.1 2.1h96.3c1.2 0 2.1-0.9 2.1-2.1L99.8 28.4z" fill="none" stroke="black" stroke-width="5"></path>
                    <path d="M59.1 5.9c-2.9 0-2 0-2.9 0 -2 0-4.4 0.6-6.4 1.5 -3.2 1.5-5.9 4.1-7.6 7.3 -0.9 1.8-1.5 3.5-1.8 5.6 0 0.9-0.3 1.5-0.3 2.3 0 1.2 0 2.1 0 3.2 0 1.5-1.2 2.9-2.6 2.9 -1.5 0-2.9-0.9-3.2-2.3 0-0.3 0-0.3 0-0.6 0-1.2 0-2.3 0-3.5 0-3.2 0.9-6.4 2-9.4 1.2-2.3 2.6-4.7 4.7-6.4 3.2-2.9 6.7-5 11.1-5.9C53.5 0.3 55 0 56.7 0c1.5 0 2.9 0 4.4 0 2.9 0 5.6 0.6 7.9 1.8 2.6 1.2 5 2.6 6.7 4.4 3.2 3.2 5.3 6.7 6.4 11.1 0.3 1.5 0.6 3.2 0.6 4.7 0 1.2 0 2.3 0 3.2 0 1.5-1.2 2.6-2.6 2.9s-2.9-0.9-3.2-2.3c0-0.3 0-0.3 0-0.6 0-1.2 0-2.6 0-3.8 0-2.3-0.6-4.4-1.8-6.4 -1.5-3.2-4.1-5.9-7.3-7.3 -1.8-0.9-3.5-1.8-5.9-1.8C61.1 5.9 59.1 5.9 59.1 5.9L59.1 5.9z" fill="none" stroke="black" stroke-width="5"></path>
                    <text x="58.5" y="77" dy=".35em" text-anchor="middle" style="color: black; font-style: normal;" class="uxskpx" data-hook="items-count"></text>
                </svg>
                  </h4>
                <h4 style="font-weight: 300;" onclick="window.location.href = '/saved'" class="b_ pointer">SAVED<svg style="width: 20px; color: #6e6e6e; margin-left:5px; margin-bottom: -3px; height: auto;" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 32 32" fill="#6e6e6e"><path d="M 7 5 L 7 28 L 8.59375 26.8125 L 16 21.25 L 23.40625 26.8125 L 25 28 L 25 5 Z M 9 7 L 23 7 L 23 24 L 16.59375 19.1875 L 16 18.75 L 15.40625 19.1875 L 9 24 Z"></path></svg></h4>
            </div-->
        </div>
        <div onclick="op()" style="width: 100%; background-color: #0000005d; backdrop-filter: blur(10px);"></div>
    </div>
    <fk id="fkhead"></fk>
    <header id="header" class="center">
        <a style="flex:1;" onclick="menu()"><img style="width: 50px;" src="{{ url_for('static', filename='img/barsa.png') }}" alt=""></a>
        <div onclick="window.location = '/home';" class="one logo center" style="flex:1;position: absolute;"><img id="frg" style="cursor: pointer; margin-top: 50px;" src="{{ url_for('static', filename='img/frg.png') }}" alt=""></div>
        <a class="one" align="right" style="flex: 1;">
            <a href="/auth" class="fb b abs"><svg data-bbox="0 0 50 50" class="svg p" data-type="shape" xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50 50"><g><path d="M25 48.077c-5.924 0-11.31-2.252-15.396-5.921 2.254-5.362 7.492-8.267 15.373-8.267 7.889 0 13.139 3.044 15.408 8.418-4.084 3.659-9.471 5.77-15.385 5.77m.278-35.3c4.927 0 8.611 3.812 8.611 8.878 0 5.21-3.875 9.456-8.611 9.456s-8.611-4.246-8.611-9.456c0-5.066 3.684-8.878 8.611-8.878M25 0C11.193 0 0 11.193 0 25c0 .915.056 1.816.152 2.705.032.295.091.581.133.873.085.589.173 1.176.298 1.751.073.338.169.665.256.997.135.515.273 1.027.439 1.529.114.342.243.675.37 1.01.18.476.369.945.577 1.406.149.331.308.657.472.98.225.446.463.883.714 1.313.182.312.365.619.56.922.272.423.56.832.856 1.237.207.284.41.568.629.841.325.408.671.796 1.02 1.182.22.244.432.494.662.728.405.415.833.801 1.265 1.186.173.154.329.325.507.475l.004-.011A24.886 24.886 0 0 0 25 50a24.881 24.881 0 0 0 16.069-5.861.126.126 0 0 1 .003.01c.172-.144.324-.309.49-.458.442-.392.88-.787 1.293-1.209.228-.232.437-.479.655-.72.352-.389.701-.78 1.028-1.191.218-.272.421-.556.627-.838.297-.405.587-.816.859-1.24a26.104 26.104 0 0 0 1.748-3.216c.208-.461.398-.93.579-1.406.127-.336.256-.669.369-1.012.167-.502.305-1.014.44-1.53.087-.332.183-.659.256-.996.126-.576.214-1.164.299-1.754.042-.292.101-.577.133-.872.095-.89.152-1.791.152-2.707C50 11.193 38.807 0 25 0"></path></g></svg></a>
            <a href="/cart"><svg class="svg s" xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%" viewBox="5.7 0 105.5 126.1" preserveAspectRatio="xMinYMax meet" data-hook="svg-icon-1"><path d="M99.8 28.4c0-1.2-0.9-2-2.1-2h-15c0 3.2 0 7.6 0 8.2 0 1.5-1.2 2.6-2.6 2.9 -1.5 0.3-2.9-0.9-3.2-2.3 0-0.3 0-0.3 0-0.6 0-0.9 0-4.7 0-8.2H40.1c0 3.2 0 7.3 0 8.2 0 1.5-1.2 2.9-2.6 2.9 -1.5 0-2.9-0.9-3.2-2.3 0-0.3 0-0.3 0-0.6 0-0.6 0-5 0-8.2h-15c-1.2 0-2 0.9-2 2L8.3 124c0 1.2 0.9 2.1 2.1 2.1h96.3c1.2 0 2.1-0.9 2.1-2.1L99.8 28.4z"></path><path d="M59.1 5.9c-2.9 0-2 0-2.9 0 -2 0-4.4 0.6-6.4 1.5 -3.2 1.5-5.9 4.1-7.6 7.3 -0.9 1.8-1.5 3.5-1.8 5.6 0 0.9-0.3 1.5-0.3 2.3 0 1.2 0 2.1 0 3.2 0 1.5-1.2 2.9-2.6 2.9 -1.5 0-2.9-0.9-3.2-2.3 0-0.3 0-0.3 0-0.6 0-1.2 0-2.3 0-3.5 0-3.2 0.9-6.4 2-9.4 1.2-2.3 2.6-4.7 4.7-6.4 3.2-2.9 6.7-5 11.1-5.9C53.5 0.3 55 0 56.7 0c1.5 0 2.9 0 4.4 0 2.9 0 5.6 0.6 7.9 1.8 2.6 1.2 5 2.6 6.7 4.4 3.2 3.2 5.3 6.7 6.4 11.1 0.3 1.5 0.6 3.2 0.6 4.7 0 1.2 0 2.3 0 3.2 0 1.5-1.2 2.6-2.6 2.9s-2.9-0.9-3.2-2.3c0-0.3 0-0.3 0-0.6 0-1.2 0-2.6 0-3.8 0-2.3-0.6-4.4-1.8-6.4 -1.5-3.2-4.1-5.9-7.3-7.3 -1.8-0.9-3.5-1.8-5.9-1.8C61.1 5.9 59.1 5.9 59.1 5.9L59.1 5.9z"></path><text x="58.5" y="77" dy=".35em" text-anchor="middle" style="color: white;" class="uxskpx" data-hook="items-count">0</text></svg></a>
        </a>
    </header><br><br><br><br><br><br><br>
    <div class="section center">
        <div class="col carrdd" style="display: flex; flex-direction: column; justify-content: center; align-items: start;" align="center">
            <h1 style="font-size: 50px;">Checkout</h1>
            <br>
            <h2>Customer Info <br></h2>
            <div class="col">
                <div class="input-container">
                    <input style="padding-left: 20px;" onchange="validateEmail(this.value)" type="text" id="fancy-input" required>
                    <label style="margin-left: 7px;" id="em" for="fancy-input">Enter Email</label>
                </div>
                <div class="input-container">
                        <label style="position: absolute;">+92</label>
                        <input style="padding-left: 45px;" onchange="validatePakistaniPhoneNumber(this.value)" type="text" id="fancy-input" required>
                        <label style="margin-left: 45px;" id="ph" for="fancy-input">Phone number</label>
                    </div>
                    <div class="input-container">
                        <input style="padding-left: 20px;" onchange="format['firstname'] = this.value" type="text" id="fancy-input" required>
                        <label style="margin-left: 7px;" for="fancy-input">First Name</label>
                    </div>

                    <div class="input-container">
                        <input style="padding-left: 20px;" onchange="format['lastname'] = this.value" type="text" id="fancy-input" required>
                        <label style="margin-left: 7px;" for="fancy-input">Last Name</label>
                    </div>
                </div>
                <br><br>
                <div class="div"></div>
                <br>
                <h2>Shopping Address</h2>
                <div class="col">
                    <div class="input-container">
                        <input style="padding-left: 20px;"onchange="format['city'] = this.value"  type="text" id="fancy-input" required>
                        <label style="margin-left: 7px;" for="fancy-input">City</label>
                    </div>
                    <div class="input-container">
                        <input style="padding-left: 20px;" onchange="format['street'] = this.value" type="text" id="fancy-input" required>
                        <label style="margin-left: 7px;" for="fancy-input">Street Address</label>
                    </div>
                    <div class="input-container">
                        <input style="padding-left: 20px;" onchange="validatePakistaniPostalCode(this.value)" type="text" id="fancy-input" required>
                        <label style="margin-left: 7px;" id="postal" for="fancy-input">Postal Code</label>
                    </div>
                </div><br><br>
            <div class="card col">
                <div><i>Items</i><i>{{ amount }}</i></div>
                <div><i>Saving</i><i>{{ saved }}</i></div>
                <div><i>Delivery Charges</i><i>200 PKR</i></div>
                <div class="divo"></div>
                <br>
                <div><i style="font-weight: 600;">Estimated Total </i><i style="font-weight: 600;">{{ total }}</i></div>
                <br>
                <a class="back-home" onclick="submit()"><p>Order Now</p></a>
                <i id="error_" style="color: red;"></i>
            </div>
        </div>
    </div>
</body>
</html>
<script>
    function validatePakistaniPhoneNumber(phoneNumber) {
    const phoneRegex = /^[3][0-9]{9}$/;
    if (phoneRegex.test(phoneNumber)) {
        document.getElementById("ph").innerHTML = "Phone number";
        document.getElementById("ph").style.color = "black";
        format['phone'] = phoneNumber;
    } else {
        document.getElementById("ph").innerHTML = "Phone number *";
        document.getElementById("ph").style.color = "red";
        format['phone'] = "";
    }
    //return phoneRegex.test(phoneNumber);
}

function validateEmail(email) {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (emailRegex.test(email)) {
        document.getElementById("em").innerHTML = "Enter Email";
        document.getElementById("em").style.color = "black";
        format['email'] = email;
    } else {
        document.getElementById("em").innerHTML = "Enter Email *";
        document.getElementById("em").style.color = "red";
        format['email'] = "";
    }
        //return emailRegex.test(email);
}

function validatePakistaniPostalCode(postalCode) {
    const postalCodeRegex = /^[0-9]{5}$/;
    if (postalCodeRegex.test(postalCode)) {
        document.getElementById("postal").innerHTML = "Postal Code";
        document.getElementById("postal").style.color = "black";
        format['postal'] = postalCode;
    } else {
        document.getElementById("postal").innerHTML = "Postal Code *";
        document.getElementById("postal").style.color = "red";
        format['postal'] = "";
    }
    //return postalCodeRegex.test(postalCode);
}
</script>
<script>
    var format = {
        "email":"",
        "phone":"",
        "firstname":"",
        "lastname":"",
        "city":"",
        "street":"",
        "postal":"",
    }
</script>
<script>
let timer;

document.addEventListener('input', e => {
  const el = e.target;
  
  if( el.matches('[data-color]') ) {
    clearTimeout(timer);
    timer = setTimeout(() => {
      document.documentElement.style.setProperty(`--color-${el.dataset.color}`, el.value);
    }, 100)
  }
})</script>
    <script>
    var got = 0;
    function up(v) {
        const value = v;
        var ticker = document.getElementById('ticker');
        ticker.innerHTML = '';
        var a;
        if (value.length> 12) 
            a = Math.floor(value.length+5);
        else
            a = Math.floor(value.length+100);
        for (var i = 0; i < a; i++) {
            var span = document.createElement('span');
            span.innerHTML = value; // Set initial text
            ticker.appendChild(span);
        }
    }
    const loc = window.location.href;
    console.log(loc)
    $(document).ready(function() {
        var token = '{{ token }}';
        var socket = io("https://"+window.location.hostname, {
            extraHeaders: {
                Authorization: '' + token
            }
        });
        socket.on(getcookie('evid')+"r", function(data) {
            /*if (data[2] != "") {
                for (let v = 0; v< data[0].length;v++) {
                    if (v != 0)
                    document.querySelectorAll("#categories_list").forEach(el => {el.innerHTML += `<li onclick="window.location.href = '/products/${data[0][v].category_id}'" class="fb b b_">${data[0][v].name.replace(/ /g, '&nbsp;')}</li>`});
                    else
                    document.querySelectorAll("#categories_list").forEach(el => {el.innerHTML = `<li onclick="window.location.href = '/products/${data[0][v].category_id}'" class="fb b b_">${data[0][v].name.replace(/ /g, '&nbsp;')}<i class="tag">NEW</i></li>`});
                }
            }*/
        });
        socket.on(getcookie('evid'), function(data) {
            if (data['goKaraleva'] == '1') {
                got = 1;
                document.querySelectorAll(".uxskpx").forEach(el => {el.innerHTML = `${data['amount']}`});
                up(data['ticker']);
            }
        });
        // Evidence that user has logged or signed in.
        socket.on(getcookie('evid'), function(data) {
            console.log(data)
        });
        function redund() {
            const j = [`${getcookie('evid')}`,''];
            socket.emit("red", `${j}`)
            socket.emit("get_category_read", "alldata_")
            console.log("Retrying...")
        }
        function soub() {
            socket.emit("sendOrder_request", format, "{{ e }}", "{{ total }}", "{{ amount }}", function (data) {
                if (data[0] == 200) {
                    function thru() {
                fetch("https://"+window.location.hostname+'/remAse', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                })
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                    if (data[0] === "200") {
                        menu("correct", "correct_");
                    } else {
                        menu("notcorrect", "notcorrect_");
                    }
                })
                .catch(error => {
                        console.error('Error:', error);
                    });
                }
                thru();
                } else {
                    menu("notcorrect", "notcorrect_");
                }
            })
            console.log("Retrying...")
        }
        window.redunduncy = redund;
        window.subi = soub;
    });
    try {
    var my_interval_variable = setInterval(my_inter,500);
    function my_inter(){
        if (got != 1) {
            redunduncy()
        } else
        clearInterval(my_interval_variable)
    }
    } catch (err) {
                console.log(err);
            }

    
    function submit() {
        if (!(JSON.stringify(format).toString().search("\"\"") > 0)) {
            console.log("submit");
            subi(); 
            document.getElementById("error_").innerHTML = "";
        } else {
            console.log("not submit");
            document.getElementById("error_").innerHTML = "&nbsp;&nbsp; Empty Field Found &nbsp;*&nbsp;";
        }
    }
    </script>
    <script>
        function TextAbstract(text, length) {
            if (text.length > length) { 
                return text.substring(0, length - 3) + '...'; 
            } 
            return text;
    }
    
    </script>
